<html>

<!--Necessary sources-->
<script src="components/webcomponentsjs/webcomponents.min.js"></script>

<link rel="import" href="pages/partials/head.html">
<link rel="stylesheet" type="text/css" href="../stylesheets/style.css">


<body  ng-app="photoApp">

<!--Calls back to navbarController, and creates the navbar fixed at the top of the screen-->
<nav ng-controller="navbarController" class="navbar navbar-fixed-top" role="navigation">
    <!--Displays brand in center of navbar-->
    <a class="navbar-brand" href="/#/">PhotoNode</a>

    <!-- Toggle is displayed for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navbar-collapse">
      <ul class="nav navbar-nav">

        <!--Displays the profile button-->
        <li class="profileButton">
          <a href="#/profile/{{uid}}"><img id="profilePic" ng-src="{{$root.avatar}}" height=40p>
            <!--Display on glyphicon when screen gets smaller-->
            <text ng-show="mediumScreen">{{displayName}}</text>
          </a>
        </li>

        <!--Displays the upload button-->
        <li class="navbarButton">
          <a ng-click="open()" href=""><span class="glyphicon glyphicon-upload"></span>
            <!--Display on glyphicon when screen gets smaller-->
            <text ng-show="mediumScreen">Upload</text>
          </a>
        </li>

        <!--Displays the public button-->
        <li class="navbarButton">
          <a ng-click="state = 'public'" href="#/public"><span class="glyphicon glyphicon-globe"></span>
            <!--Display on glyphicon when screen gets smaller-->
            <text ng-show="mediumScreen">Public</text>
          </a>
        </li>

        <!--Displays the private button-->
        <li class="navbarButton">
          <a ng-click="state = 'private'" href="#/private"><span class="glyphicon glyphicon-envelope"></span>
            <!--Display on glyphicon when screen gets smaller-->
            <text ng-show="mediumScreen">Private</text>
          </a>
        </li>
      </ul>

      <!--Places the following to the right of the navbar-->
      <ul class="nav navbar-nav navbar-right">
        <li>
          <!--Displays the search bar and defines its functionality-->
          <form class="searchBar navbar-form" role="search">
            <div class="form-group input-group stylish-input-group">
              <input type="text" id="searchText" ng-model="searchQuery" class="form-control" placeholder="Search">
              <span class="input-group-addon">
                <button type="submit" id="searchButton" ng-click="search()">
                  <span class="glyphicon glyphicon-search"></span>
                </button>
              </span>

              <!--Allows the user to submit search by hitting enter-->
              <script>
              $("#searchText").keyup(function(event){
                if(event.keyCode == 13 || event.which == 13){
                  $("#searchButton").click();
                }
              });
              </script>

            </div>
          </form>
        </li>

        <!--Displays the logout button-->
        <li class="navbarButton logOut">
          <a ng-click="logout()" href=""><span class="glyphicon glyphicon-log-out"></span>
            <!--Display on glyphicon when screen gets smaller-->
            <text ng-show="mediumScreen">Logout</text>
          </a>
        </li>

      </ul>

    </div>
</nav>


<!--Calls navbarController to allow functionality of the upload modal-->
<div ng-controller="navbarController">
  <script type="text/ng-template" id="myModalContent.html">

    <!-- Upload header/title -->
    <div class="modal-header">
      <h3 class="modal-title">Upload your photos!</h3>
    </div>
    <!-- The modal's body -->
    <div class="modal-body">

      <!-- Declares the form as a file-uploader -->
        <div style="position:relative;">
      		<a class='btn btn-primary' href='javascript:;'>
      			Choose File...
      			<input type="file" file-input="files" style='position:absolute;z-index:2;top:0;left:0;filter: alpha(opacity=0);opacity:0;background-color:transparent;color:transparent;' name="file_source" size="40"  onchange='$("#upload-file-info").html($(this).val());'>
      		</a>
      		&nbsp;
      		<span class='label label-info' id="upload-file-info"></span>
      	</div>

        <!-- Creates ability to make tags for photos -->
        <div class="form-group">
          <label for="tag">Tags:</label>
          <input ng-model="tags" type="text" class="form-control" id="tag">
        </div>

        <div class="form-group">
          <label for="shares">Share with:</label>
          <input ng-model="shares" type="text" class="form-control" id="shares">
        </div>

        <div class="form-group">
          <label>
            <input type="radio" ng-model="visibility" value="private">
            Private
          </label>
          <label>
            <input type="radio" ng-model="visibility" value="public">
            Public
          </label>
        </div>

    </div>

    <!-- The modal's footer -->
    <div class="modal-footer">

      <!-- Creates the submit/"Upload" and "Close" buttons -->
      <button type="submit" class="btn btn-info" ng-click="uploadFile()">Upload</button>
      <button class="btn btn-warning" ng-click="cancel()">Close</button>
    </div>

  </script>
</div>


<div id="main">

    <div class="page {{pageClass}}" ng-view></div>

</div>


</body>

</html>
